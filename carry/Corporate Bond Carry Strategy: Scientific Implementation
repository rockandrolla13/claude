# Corporate Bond Carry Strategy: Scientific Implementation Plan

## Document Control

| Field | Value |
|-------|-------|
| Version | 1.0 |
| Status | Pre-Implementation |
| Asset Class | Investment Grade Corporate Bonds (USD) |
| Strategy Types | Cross-Sectional (XS), Time-Series (TS) |
| Enhancement | Realized Skewness Factor |
| Primary References | Koijen et al. (2018), Baltas (2017), Baltas & Salinas (2019) |

---

# Part I: Theoretical Foundation

## 1. Definition of Carry

### 1.1 General Framework

Following Koijen, Moskowitz, Pedersen & Vrugt (2018), carry is defined as the expected return of an asset assuming prices remain unchanged:

$$
\text{Total Return} = \underbrace{\text{Carry}}_{\text{Known at } t} + \underbrace{\mathbb{E}_t[\text{Price Appreciation}]}_{\text{Expected Return Component}} + \underbrace{\epsilon_{t+1}}_{\text{Unexpected Shock}}
$$

**Key Insight**: Carry is observable ex-ante and requires no forecasting model. It represents the return an investor receives simply for holding the asset if market conditions remain static.

### 1.2 Carry for Corporate Bonds

For a corporate bond $i$ at time $t$, carry consists of three components:

$$
C_{i,t} = \underbrace{\text{OAS}_{i,t} \times D_{i,t}}_{\text{Credit Carry}} + \underbrace{\text{RollDown}_{i,t}}_{\text{Curve Carry}} - \underbrace{r_f \times D_{i,t}}_{\text{Funding Cost}}
$$

Where:
- $\text{OAS}_{i,t}$ = Option-Adjusted Spread (in decimal form, i.e., basis points / 10,000)
- $D_{i,t}$ = Modified Duration
- $\text{RollDown}_{i,t}$ = Price appreciation from aging along the credit curve
- $r_f$ = Risk-free funding rate (SOFR)

### 1.3 Simplified MVP Specification

For the initial implementation, we use the first-order approximation:

$$
\boxed{
\begin{aligned}
\text{Gross Carry}_{i,t} &= \frac{\text{OAS}_{i,t}}{10000} \times D_{i,t} \\[8pt]
\text{Net Carry}_{i,t} &= \text{Gross Carry}_{i,t} - r_{f,t} \times D_{i,t}
\end{aligned}
}
$$

**Interpretation**: 
- Gross Carry = Annualized excess return from credit spread, scaled by interest rate sensitivity
- Net Carry = Gross carry minus the cost of financing the duration exposure

### 1.4 Economic Rationale

Why should high-carry corporate bonds outperform low-carry bonds?

| Component | Risk Being Compensated | Expected Sign |
|-----------|----------------------|---------------|
| OAS × Duration | Credit/default risk, illiquidity risk, downgrade risk | Positive premium |
| Roll-down | Term structure risk in credit spreads | Positive (if curve upward sloping) |
| Funding cost | Leverage cost, funding liquidity risk | Negative drag |

**Hypothesis**: Bonds with higher net carry (after funding costs) should deliver higher realized returns on average, as investors are compensated for bearing credit and liquidity risks.

---

## 2. Portfolio Construction Methodologies

### 2.1 Cross-Sectional (XS) Carry Portfolio

**Source**: Koijen et al. (2018), Equation 2; Baltas (2017), Equation 6-7

The XS portfolio exploits the relative ranking of carry signals within the cross-section of bonds.

#### 2.1.1 Signal Construction

At each rebalancing date $t$, for each bond $i \in \{1, ..., N_t\}$:

1. Compute net carry: $C_{i,t}$
2. Rank bonds by carry (ascending): $R_{i,t} = \text{rank}(C_{i,t})$, where $R \in \{1, ..., N_t\}$
3. Higher rank = higher carry

#### 2.1.2 Weight Assignment

Following Asness, Moskowitz & Pedersen (2013) and Koijen et al. (2018):

$$
\tilde{w}_{i,t}^{XS} = R_{i,t} - \frac{N_t + 1}{2}
$$

This produces:
- Positive weights for bonds with above-median carry (long positions)
- Negative weights for bonds with below-median carry (short positions)
- Larger absolute weights for bonds further from the median

#### 2.1.3 Normalization

Normalize to achieve 100% gross exposure:

$$
w_{i,t}^{XS} = \frac{\tilde{w}_{i,t}^{XS}}{\sum_{j=1}^{N_t} |\tilde{w}_{j,t}^{XS}|}
$$

#### 2.1.4 Portfolio Properties

| Property | Value | Implication |
|----------|-------|-------------|
| $\sum_i w_{i,t}^{XS}$ | = 0 | Dollar neutral |
| $\sum_i |w_{i,t}^{XS}|$ | = 1 | 100% gross exposure |
| Long leg | Highest carry bonds | Earn spread premium |
| Short leg | Lowest carry bonds | Hedge market exposure |

### 2.2 Time-Series (TS) Carry Portfolio

**Source**: Baltas (2017), Equation 8; Moskowitz, Ooi & Pedersen (2012)

The TS portfolio takes directional positions based on the sign of each bond's carry.

#### 2.2.1 Signal Construction

At each rebalancing date $t$, for each bond $i$:

$$
\text{Signal}_{i,t} = \text{sign}(C_{i,t})
$$

Where:
- $\text{sign}(x) = +1$ if $x > 0$
- $\text{sign}(x) = -1$ if $x < 0$
- $\text{sign}(x) = 0$ if $x = 0$ (exclude from portfolio)

#### 2.2.2 Weight Assignment

Equal gross weights within each leg:

$$
w_{i,t}^{TS} = \frac{\text{sign}(C_{i,t})}{N_t}
$$

#### 2.2.3 Portfolio Properties

| Property | Value | Implication |
|----------|-------|-------------|
| $\sum_i w_{i,t}^{TS}$ | ≠ 0 (generally) | NOT dollar neutral |
| $\sum_i |w_{i,t}^{TS}|$ | = 1 | 100% gross exposure |
| Net exposure | $(N^+ - N^-) / N_t$ | Varies with market regime |

**Key Difference from XS**: The TS portfolio has directional market exposure that varies over time depending on the proportion of bonds with positive vs. negative carry.

### 2.3 Comparison of XS and TS Approaches

| Dimension | Cross-Sectional (XS) | Time-Series (TS) |
|-----------|---------------------|------------------|
| Signal used | Relative rank | Absolute sign |
| Dollar neutral | Yes | No |
| Directional tilt | None | Varies with regime |
| Turnover | Higher | Lower |
| Diversification | Higher (both legs active) | Depends on signal dispersion |
| Academic precedent | Koijen et al. (2018) | Moskowitz et al. (2012), Baltas (2017) |

---

## 3. Realized Skewness Enhancement

### 3.1 Theoretical Background

**Source**: Baltas & Salinas (2019), "Cross-Asset Skew"

The literature documents that assets with more negative realized skewness earn higher expected returns, as compensation for bearing crash/tail risk.

**Hypothesis**: Within corporate bonds, bonds with more negative return skewness should outperform bonds with less negative (or positive) skewness.

### 3.2 Skewness Metric

Following Baltas & Salinas (2019), Equation 1:

$$
\widehat{\text{Skew}}_{i,t} = \frac{1}{D} \sum_{d=1}^{D} \frac{(r_{i,d,t} - \hat{\mu}_{i,t})^3}{\hat{\sigma}_{i,t}^3}
$$

Where:
- $r_{i,d,t}$ = Daily return of bond $i$ on day $d$
- $D$ = Number of trading days in lookback window (typically 252 for 12 months)
- $\hat{\mu}_{i,t} = \frac{1}{D} \sum_{d=1}^{D} r_{i,d,t}$ = Sample mean
- $\hat{\sigma}_{i,t}^2 = \frac{1}{D-1} \sum_{d=1}^{D} (r_{i,d,t} - \hat{\mu}_{i,t})^2$ = Sample variance

### 3.3 Skewness Portfolio Construction

**Critical**: The relationship between skewness and returns is NEGATIVE (more negative skew → higher returns).

Therefore, we rank by the NEGATIVE of skewness:

$$
\tilde{w}_{i,t}^{Skew} = \text{rank}(-\widehat{\text{Skew}}_{i,t}) - \frac{N_t + 1}{2}
$$

This produces:
- Long positions in most negatively skewed bonds
- Short positions in most positively skewed bonds

### 3.4 Combined Signal Construction

Three methods to combine carry and skewness:

#### Method A: Signal Averaging

$$
\text{Combined}_{i,t} = \lambda \cdot z(C_{i,t}) + (1-\lambda) \cdot z(-\widehat{\text{Skew}}_{i,t})
$$

Where $z(\cdot)$ denotes cross-sectional z-score normalization and $\lambda \in [0,1]$ is a mixing parameter.

#### Method B: Double Sort

1. Sort bonds into carry quintiles
2. Within each quintile, sort by skewness
3. Go long Q5-Carry/Q1-Skew, short Q1-Carry/Q5-Skew

#### Method C: Risk-Budgeting (Baltas 2017 OPT Framework)

Score each bond by carry strength, adjust for skewness, optimize allocation subject to risk budget constraints. (Advanced implementation, Phase 2)

---

## 4. Return Calculation for Corporate Bonds

### 4.1 Total Return Components

For a corporate bond, the holding period return consists of:

$$
r_{i,t \to t+h} = \underbrace{\frac{P_{i,t+h} - P_{i,t}}{P_{i,t}}}_{\text{Price Return}} + \underbrace{\frac{AI_{i,t+h} - AI_{i,t} + \text{Coupon}_{i,t \to t+h}}{P_{i,t} + AI_{i,t}}}_{\text{Income Return}}
$$

Where:
- $P_{i,t}$ = Clean price
- $AI_{i,t}$ = Accrued interest
- $h$ = Holding period (in days)

### 4.2 Approximation Using Yield Changes

For practical implementation, if price data is unreliable:

$$
r_{i,t \to t+h} \approx -D_{i,t} \times \Delta y_{i,t \to t+h} + \frac{1}{2} \times \text{Convexity}_{i,t} \times (\Delta y_{i,t \to t+h})^2 + \text{Carry}_{i,t} \times \frac{h}{252}
$$

For small yield changes, the first-order approximation suffices:

$$
r_{i,t \to t+h} \approx -D_{i,t} \times \Delta y_{i,t \to t+h} + C_{i,t} \times \frac{h}{252}
$$

### 4.3 Excess Return Calculation

Excess return over the risk-free rate:

$$
r_{i,t \to t+h}^{excess} = r_{i,t \to t+h} - r_{f,t} \times \frac{h}{252}
$$

---

# Part II: Implementation Specification

## 5. Data Requirements

### 5.1 Universe Definition

| Parameter | Specification | Rationale |
|-----------|--------------|-----------|
| Asset class | Investment Grade Corporate Bonds | Focus on liquid, priceable securities |
| Currency | USD only | Avoid FX effects |
| Rating | BBB- and above (S&P/Fitch) or Baa3+ (Moody's) | IG definition |
| Maturity | > 1 year | Exclude near-maturity bonds |
| Issue size | ≥ $250 million | Liquidity filter |
| Bond type | Fixed-rate, bullet | Exclude complex structures |
| Exclusions | Callable (optional), convertible, floating | Clean carry calculation |

### 5.2 Required Data Fields

#### 5.2.1 Static/Reference Data

| Field | Description | Source |
|-------|-------------|--------|
| `cusip` | Primary identifier (9-character) | Reference database |
| `isin` | Secondary identifier | Reference database |
| `issuer` | Issuer name/ID | Reference database |
| `coupon` | Annual coupon rate (decimal) | Reference database |
| `maturity_date` | Bond maturity date | Reference database |
| `issue_date` | Original issue date | Reference database |
| `issue_size` | Face value outstanding | Reference database |
| `currency` | Currency code | Reference database |
| `seniority` | Senior/subordinated | Reference database |
| `sector` | GICS/BICS sector | Reference database |

#### 5.2.2 Time-Varying Data (Daily or Monthly)

| Field | Description | Units | Source |
|-------|-------------|-------|--------|
| `as_of_date` | Observation date | Date | - |
| `oas` | Option-adjusted spread | Basis points | Pricing service |
| `duration` | Modified duration | Years | Pricing service |
| `yield` | Yield to maturity/worst | Decimal | Pricing service |
| `price` | Clean price | % of par | Pricing service |
| `rating` | Credit rating | Category | Rating agency |
| `convexity` | Bond convexity | Years² | Pricing service |

#### 5.2.3 Market Data

| Field | Description | Units | Source |
|-------|-------------|-------|--------|
| `sofr` | Secured Overnight Financing Rate | Decimal (annualized) | Federal Reserve |
| `treasury_curve` | Treasury yield curve | Decimal | Federal Reserve |

### 5.3 Data Quality Requirements

| Requirement | Specification | Handling |
|-------------|--------------|----------|
| Completeness | No nulls in: cusip, as_of_date, oas, duration | Drop observation |
| Validity | duration > 0 | Drop observation |
| Validity | oas ≥ 0 (for IG) | Flag if negative |
| Validity | 0 < price < 200 | Flag outliers |
| Consistency | Rating within IG range | Filter to universe |
| Timeliness | Data available by T+1 | Lag signals appropriately |

---

## 6. Signal Construction Specification

### 6.1 Carry Signal

#### 6.1.1 Input Variables

```
INPUTS:
- oas[i,t]: OAS for bond i at time t (basis points)
- duration[i,t]: Modified duration for bond i at time t (years)
- sofr[t]: SOFR rate at time t (annualized decimal)
```

#### 6.1.2 Algorithm

```
ALGORITHM: ComputeCarry

FOR each bond i in universe at time t:
    
    # Step 1: Convert OAS to decimal
    oas_decimal[i,t] = oas[i,t] / 10000
    
    # Step 2: Compute gross carry
    gross_carry[i,t] = oas_decimal[i,t] * duration[i,t]
    
    # Step 3: Compute funding cost
    funding_cost[i,t] = sofr[t] * duration[i,t]
    
    # Step 4: Compute net carry
    net_carry[i,t] = gross_carry[i,t] - funding_cost[i,t]

RETURN: DataFrame with columns [cusip, as_of_date, gross_carry, net_carry]
```

#### 6.1.3 Cross-Sectional Normalization

```
ALGORITHM: NormalizeCarry

# Compute cross-sectional statistics at time t
mu[t] = mean(net_carry[*,t])
sigma[t] = std(net_carry[*,t])

FOR each bond i:
    carry_zscore[i,t] = (net_carry[i,t] - mu[t]) / sigma[t]

RETURN: DataFrame with additional column [carry_zscore]
```

### 6.2 Skewness Signal

#### 6.2.1 Input Variables

```
INPUTS:
- returns[i,d]: Daily returns for bond i on day d
- lookback: Number of trading days (default: 252)
```

#### 6.2.2 Algorithm

```
ALGORITHM: ComputeRealizedSkewness

FOR each bond i at rebalancing date t:
    
    # Step 1: Extract lookback window of returns
    r = returns[i, t-lookback+1 : t]  # Array of length lookback
    
    # Step 2: Check for sufficient data
    IF count(non-null r) < 0.8 * lookback:
        skew[i,t] = NULL
        CONTINUE
    
    # Step 3: Compute moments
    mu = mean(r)
    sigma = std(r, ddof=1)  # Sample standard deviation
    
    # Step 4: Compute skewness (Pearson's moment coefficient)
    skew[i,t] = mean( ((r - mu) / sigma)^3 )

RETURN: DataFrame with columns [cusip, as_of_date, realized_skew]
```

#### 6.2.3 Skewness Rank (for Portfolio Construction)

```
ALGORITHM: RankSkewness

# CRITICAL: Negative skewness → Higher expected return
# Therefore, rank by NEGATIVE skewness

FOR each date t:
    skew_rank[i,t] = rank(-realized_skew[i,t])  # Ascending rank
    # Highest rank = most negative skewness

RETURN: DataFrame with additional column [skew_rank]
```

---

## 7. Portfolio Construction Specification

### 7.1 Cross-Sectional (XS) Carry Portfolio

#### 7.1.1 Algorithm

```
ALGORITHM: ConstructXSPortfolio

INPUTS:
- signals: DataFrame with [cusip, as_of_date, net_carry]
- rebalance_date: Date t

# Step 1: Filter to active universe at t
universe = signals[signals.as_of_date == rebalance_date]
N = count(universe)

# Step 2: Rank by carry
universe['carry_rank'] = rank(universe['net_carry'])  # 1 = lowest, N = highest

# Step 3: Compute demeaned rank weights
universe['raw_weight'] = universe['carry_rank'] - (N + 1) / 2

# Step 4: Normalize to 100% gross exposure
gross_exposure = sum(abs(universe['raw_weight']))
universe['weight'] = universe['raw_weight'] / gross_exposure

# Step 5: Validation
ASSERT abs(sum(universe['weight'])) < 1e-10  # Dollar neutral
ASSERT abs(sum(abs(universe['weight'])) - 1.0) < 1e-10  # 100% gross

RETURN: DataFrame with columns [cusip, as_of_date, carry_rank, weight]
```

#### 7.1.2 Example Calculation

For $N = 5$ bonds with carries $[0.02, 0.05, 0.03, 0.01, 0.04]$:

| Bond | Carry | Rank | Demeaned Rank | Normalized Weight |
|------|-------|------|---------------|-------------------|
| D | 0.01 | 1 | 1 - 3 = -2 | -2/6 = -0.333 |
| A | 0.02 | 2 | 2 - 3 = -1 | -1/6 = -0.167 |
| C | 0.03 | 3 | 3 - 3 = 0 | 0/6 = 0.000 |
| E | 0.04 | 4 | 4 - 3 = +1 | +1/6 = +0.167 |
| B | 0.05 | 5 | 5 - 3 = +2 | +2/6 = +0.333 |

Sum of weights = 0 ✓
Sum of |weights| = 1 ✓

### 7.2 Time-Series (TS) Carry Portfolio

#### 7.2.1 Algorithm

```
ALGORITHM: ConstructTSPortfolio

INPUTS:
- signals: DataFrame with [cusip, as_of_date, net_carry]
- rebalance_date: Date t
- threshold: Carry threshold for position (default: 0)

# Step 1: Filter to active universe at t
universe = signals[signals.as_of_date == rebalance_date]
N = count(universe)

# Step 2: Determine position sign
universe['position'] = sign(universe['net_carry'] - threshold)
# +1 if carry > threshold (long)
# -1 if carry < threshold (short)
# 0 if carry == threshold (no position)

# Step 3: Remove zero positions
active = universe[universe['position'] != 0]
N_active = count(active)

# Step 4: Equal weights within legs
active['weight'] = active['position'] / N_active

# Step 5: Normalize to 100% gross exposure
gross_exposure = sum(abs(active['weight']))
active['weight'] = active['weight'] / gross_exposure

# Note: This portfolio is NOT dollar neutral
net_exposure = sum(active['weight'])  # Will vary over time

RETURN: DataFrame with columns [cusip, as_of_date, position, weight, net_exposure]
```

### 7.3 Combined Carry + Skewness Portfolio

#### 7.3.1 Signal Averaging Method

```
ALGORITHM: ConstructCombinedPortfolio_Averaging

INPUTS:
- carry_signals: DataFrame with [cusip, as_of_date, carry_zscore]
- skew_signals: DataFrame with [cusip, as_of_date, realized_skew]
- lambda: Mixing parameter (default: 0.5)

# Step 1: Merge signals
combined = merge(carry_signals, skew_signals, on=['cusip', 'as_of_date'])

# Step 2: Z-score normalize skewness (note: negate for correct direction)
combined['skew_zscore'] = -zscore(combined['realized_skew'])

# Step 3: Compute combined signal
combined['combined_signal'] = lambda * combined['carry_zscore'] + 
                              (1 - lambda) * combined['skew_zscore']

# Step 4: Construct XS portfolio using combined signal
portfolio = ConstructXSPortfolio(combined, signal_column='combined_signal')

RETURN: portfolio
```

---

## 8. Backtesting Specification

### 8.1 Backtest Parameters

| Parameter | Value | Rationale |
|-----------|-------|-----------|
| Rebalancing frequency | Monthly (end of month) | Corporates too illiquid for higher frequency |
| Execution assumption | T+1 at mid-price | Conservative; allows signal computation |
| Transaction cost | 20 bps (IG), configurable | Typical bid-ask for liquid IG |
| Funding rate | SOFR | Standard USD funding benchmark |
| Start date | Dependent on data availability | Minimum 100 bonds in universe |
| End date | Most recent complete month | Avoid partial period bias |

### 8.2 Backtest Algorithm

```
ALGORITHM: RunBacktest

INPUTS:
- strategy: 'xs_carry' | 'ts_carry' | 'xs_skew' | 'combined'
- start_date, end_date: Backtest period
- transaction_cost_bps: Cost in basis points
- rebalance_freq: 'M' (monthly)

INITIALIZE:
- portfolio_value = 1.0
- positions = {}  # cusip -> weight
- returns_series = []
- trades_log = []

FOR each rebalance_date in date_range(start_date, end_date, freq=rebalance_freq):
    
    # Step 1: Load data as of rebalance_date (NO LOOK-AHEAD)
    universe = load_universe(as_of_date=rebalance_date)
    signals = compute_signals(universe, signal_type=strategy)
    
    # Step 2: Construct target portfolio
    target_weights = construct_portfolio(signals, strategy)
    
    # Step 3: Compute trades (target - current positions)
    trades = compute_trades(positions, target_weights)
    
    # Step 4: Apply transaction costs
    trade_cost = sum(abs(trades['notional'])) * transaction_cost_bps / 10000
    
    # Step 5: Execute trades at T+1 prices
    execution_date = next_business_day(rebalance_date)
    execution_prices = get_prices(execution_date)
    
    # Step 6: Update positions
    positions = target_weights
    
    # Step 7: Compute period return
    # (From execution_date to next execution_date)
    period_return = compute_portfolio_return(positions, 
                                             start=execution_date,
                                             end=next_rebalance_execution_date)
    net_return = period_return - trade_cost
    
    # Step 8: Update portfolio value
    portfolio_value *= (1 + net_return)
    
    # Step 9: Log results
    returns_series.append({'date': rebalance_date, 'return': net_return})
    trades_log.append(trades)

RETURN: BacktestResult(returns_series, trades_log, positions_history)
```

### 8.3 Look-Ahead Bias Prevention

**Critical Implementation Rules**:

1. **Signal computation**: Only use data available at or before rebalance_date
2. **Execution**: Assume T+1 execution (cannot trade on signal date)
3. **Returns**: Compute from execution date forward
4. **Corporate actions**: Handle maturities, calls, defaults appropriately

```
TIMELINE:

    T (Month End)              T+1 (Next Business Day)
         |                            |
         v                            v
    +-----------+                +-----------+
    | Compute   |                | Execute   |
    | Signals   |                | Trades    |
    +-----------+                +-----------+
         |                            |
         | Data as of T              | Prices at T+1
         | (no future info)          |
```

---

## 9. Performance Metrics Specification

### 9.1 Return Statistics

#### 9.1.1 Annualized Return

$$
\mu_{ann} = \left( \prod_{t=1}^{T} (1 + r_t) \right)^{12/T} - 1
$$

For monthly returns over $T$ months.

#### 9.1.2 Annualized Volatility

$$
\sigma_{ann} = \sigma_{monthly} \times \sqrt{12}
$$

Where $\sigma_{monthly} = \sqrt{\frac{1}{T-1} \sum_{t=1}^{T} (r_t - \bar{r})^2}$

### 9.2 Risk-Adjusted Returns

#### 9.2.1 Sharpe Ratio

$$
SR = \frac{\mu_{ann}}{\sigma_{ann}}
$$

Note: Returns are already excess returns (over funding rate).

#### 9.2.2 Sortino Ratio

$$
\text{Sortino} = \frac{\mu_{ann}}{\sigma_{downside,ann}}
$$

Where:
$$
\sigma_{downside} = \sqrt{\frac{1}{T_{down}} \sum_{t: r_t < 0} r_t^2}
$$

#### 9.2.3 Calmar Ratio

$$
\text{Calmar} = \frac{\mu_{ann}}{\text{MaxDrawdown}}
$$

### 9.3 Higher Moments

#### 9.3.1 Skewness

$$
\text{Skew} = \frac{1}{T} \sum_{t=1}^{T} \left( \frac{r_t - \bar{r}}{\sigma} \right)^3
$$

#### 9.3.2 Kurtosis

$$
\text{Kurt} = \frac{1}{T} \sum_{t=1}^{T} \left( \frac{r_t - \bar{r}}{\sigma} \right)^4
$$

### 9.4 Drawdown Analysis

#### 9.4.1 Maximum Drawdown

$$
\text{MaxDD} = \max_{t \in [1,T]} \left( \frac{\text{Peak}_t - \text{Value}_t}{\text{Peak}_t} \right)
$$

Where $\text{Peak}_t = \max_{s \leq t} \text{Value}_s$

### 9.5 Statistical Significance

#### 9.5.1 T-Statistic for Mean Return

Using Newey-West standard errors to account for autocorrelation:

$$
t = \frac{\bar{r}}{\text{SE}_{NW}(\bar{r})}
$$

With significance levels: * p < 0.10, ** p < 0.05, *** p < 0.01

---

## 10. Validation Tests Specification

### 10.1 Signal Predictability Test

**Objective**: Test whether carry predicts future bond returns.

#### 10.1.1 Fama-MacBeth Regression

For each month $t$:

$$
r_{i,t+1} = \alpha_t + \beta_t \cdot C_{i,t} + \epsilon_{i,t+1}
$$

Then compute time-series averages:

$$
\bar{\beta} = \frac{1}{T} \sum_{t=1}^{T} \beta_t
$$

**Test**: $H_0: \bar{\beta} = 0$ vs $H_1: \bar{\beta} > 0$

#### 10.1.2 Panel Regression with Fixed Effects

$$
r_{i,t+1} = \alpha + \beta \cdot C_{i,t} + \gamma \cdot X_{i,t} + \eta_i + \delta_t + \epsilon_{i,t+1}
$$

Where:
- $X_{i,t}$ = Control variables (duration, rating, sector)
- $\eta_i$ = Bond fixed effects
- $\delta_t$ = Time fixed effects

### 10.2 Quintile Analysis

#### 10.2.1 Procedure

1. At each rebalance date, sort bonds into 5 groups by carry
2. Compute equal-weighted return of each quintile over next period
3. Compute Q5 - Q1 spread (high carry minus low carry)

#### 10.2.2 Expected Results

| Quintile | Carry Level | Expected Return |
|----------|-------------|-----------------|
| Q1 | Lowest | Lowest |
| Q2 | Low | Below average |
| Q3 | Medium | Average |
| Q4 | High | Above average |
| Q5 | Highest | Highest |

Spread (Q5-Q1) should be positive and statistically significant.

### 10.3 Factor Spanning Tests

**Objective**: Test whether carry alpha survives controlling for known factors.

#### 10.3.1 Regression Specification

$$
r_{t}^{Carry} = \alpha + \beta_1 \cdot r_t^{Duration} + \beta_2 \cdot r_t^{Credit} + \beta_3 \cdot r_t^{Momentum} + \epsilon_t
$$

Where:
- $r_t^{Duration}$ = Return on duration-matched Treasury portfolio
- $r_t^{Credit}$ = Return on credit index (e.g., CDX IG)
- $r_t^{Momentum}$ = Return on bond momentum factor

**Test**: $H_0: \alpha = 0$

#### 10.3.2 Factor Definitions

| Factor | Construction |
|--------|--------------|
| Duration | Long 10Y Treasury futures |
| Credit | Long CDX IG index |
| Momentum | Long past winners, short past losers (12-1 month returns) |

### 10.4 Skewness Enhancement Tests

#### 10.4.1 Standalone Skewness Test

Run identical analysis (predictability, quintiles, spanning) for skewness signal.

#### 10.4.2 Incremental Value Test

$$
r_{i,t+1} = \alpha + \beta_1 \cdot C_{i,t} + \beta_2 \cdot (-\text{Skew}_{i,t}) + \epsilon_{i,t+1}
$$

**Test**: $H_0: \beta_2 = 0$ (skewness adds no value after controlling for carry)

#### 10.4.3 Mean-Variance Spanning Test (Huberman-Kandel)

**Null hypothesis**: The set $\{Carry, Momentum, Value\}$ spans the augmented set $\{Carry, Momentum, Value, Skewness\}$

Joint test: $H_0: \alpha = 0$ AND $\sum_i \beta_i = 1$

Using GMM Wald statistic (robust to non-normality):

$$
W = T \cdot \begin{pmatrix} \hat{\alpha} \\ \sum \hat{\beta}_i - 1 \end{pmatrix}' \hat{V}^{-1} \begin{pmatrix} \hat{\alpha} \\ \sum \hat{\beta}_i - 1 \end{pmatrix} \sim \chi^2(2)
$$

If $W$ exceeds critical value (p < 0.05), reject $H_0$ → skewness expands efficient frontier.

---

## 11. Risk Analysis Specification

### 11.1 Downside Risk Exposure

Following Baltas (2017), Table 11-13.

#### 11.1.1 Market Beta

$$
r_t^{Carry} = \alpha + \beta \cdot r_t^{MKT} + \epsilon_t
$$

Where $r_t^{MKT}$ = Credit market return (CDX IG or corporate bond index)

#### 11.1.2 Market Squared (Convexity)

$$
r_t^{Carry} = \alpha + \beta_1 \cdot r_t^{MKT} + \beta_2 \cdot (r_t^{MKT})^2 + \epsilon_t
$$

Negative $\beta_2$ indicates exposure to large market moves.

#### 11.1.3 Henriksson-Merton Downside Beta

$$
r_t^{Carry} = \alpha + \beta \cdot r_t^{MKT} + \gamma \cdot r_t^{MKT,down} + \epsilon_t
$$

Where:
$$
r_t^{MKT,down} = -r_t^{MKT} \cdot \mathbb{1}_{r_t^{MKT} < 0}
$$

Negative $\gamma$ indicates vulnerability to market crashes.

#### 11.1.4 Lettau-Maggiori-Weber Tail Risk

$$
r_t^{Carry} = \alpha + \beta \cdot r_t^{MKT} + \delta \cdot r_t^{MKT,tail} + \epsilon_t
$$

Where:
$$
r_t^{MKT,tail} = -r_t^{MKT} \cdot \mathbb{1}_{r_t^{MKT} < -\sigma_{MKT}}
$$

Negative $\delta$ indicates exposure to extreme left-tail events.

### 11.2 Volatility Risk Exposure

$$
r_t^{Carry} = \alpha + \beta \cdot r_t^{MKT} + \phi \cdot \Delta VIX_t + \epsilon_t
$$

Negative $\phi$ indicates the strategy suffers when volatility increases.

### 11.3 Credit-Specific Risk Factors

$$
r_t^{Carry} = \alpha + \beta_1 \cdot \Delta \text{IG Spread}_t + \beta_2 \cdot \Delta \text{HY Spread}_t + \epsilon_t
$$

---

# Part III: Implementation Roadmap

## 12. Phased Implementation Plan

### Phase 1: Data Infrastructure (Week 1)

| Task | Output | Tests |
|------|--------|-------|
| 1.1 Profile existing data | `reports/data_profile.md` | Data completeness > 80% |
| 1.2 Build universe loader | `src/data/bond_universe.py` | Unit tests pass |
| 1.3 Build carry signal generator | `src/signals/carry.py` | Matches manual calculation |
| 1.4 Build forward returns calculator | `src/signals/forward_returns.py` | No look-ahead bias |

### Phase 2: Strategy Implementation (Week 2)

| Task | Output | Tests |
|------|--------|-------|
| 2.1 XS carry portfolio | `src/portfolio/xs_carry.py` | Sum weights = 0, Sum |weights| = 1 |
| 2.2 TS carry portfolio | `src/portfolio/ts_carry.py` | Sum |weights| = 1 |
| 2.3 Skewness signal | `src/signals/skewness.py` | Matches Baltas formula |
| 2.4 Combined portfolio | `src/portfolio/combined.py` | Correct signal mixing |

### Phase 3: Backtesting (Week 3)

| Task | Output | Tests |
|------|--------|-------|
| 3.1 Backtest engine design | `docs/BACKTEST_DESIGN.md` | Architecture review |
| 3.2 Backtest runner | `src/backtest/runner.py` | No look-ahead bias |
| 3.3 Transaction cost model | `src/backtest/costs.py` | Realistic cost estimates |
| 3.4 Performance metrics | `src/backtest/metrics.py` | Matches known benchmarks |

### Phase 4: Validation (Week 4)

| Task | Output | Tests |
|------|--------|-------|
| 4.1 Signal predictability | `reports/carry_validation.md` | Fama-MacBeth β significant |
| 4.2 Quintile analysis | `reports/quintile_analysis.md` | Monotonic returns |
| 4.3 Factor spanning | `reports/factor_spanning.md` | α survives controls |
| 4.4 Skewness tests | `reports/skewness_enhancement.md` | H-K test result |
| 4.5 Risk analysis | `reports/risk_analysis.md` | Downside exposure quantified |

---

## 13. File Structure

```
carry-strategy-research/
├── .claude/
│   └── skills/
│       └── bond-data-profiler/
│           ├── SKILL.md
│           ├── column-mappings.md
│           └── modes/
│               ├── profile.md
│               ├── forward-returns.md
│               └── carry.md
├── CLAUDE.md
├── plan.md
├── prereg.yaml
├── docs/
│   ├── BACKTEST_DESIGN.md
│   ├── DATA_DICTIONARY.md
│   └── METHODOLOGY.md
├── src/
│   ├── __init__.py
│   ├── data/
│   │   ├── __init__.py
│   │   └── bond_universe.py
│   ├── signals/
│   │   ├── __init__.py
│   │   ├── carry.py
│   │   ├── forward_returns.py
│   │   └── skewness.py
│   ├── portfolio/
│   │   ├── __init__.py
│   │   ├── xs_carry.py
│   │   ├── ts_carry.py
│   │   └── combined.py
│   ├── backtest/
│   │   ├── __init__.py
│   │   ├── runner.py
│   │   ├── costs.py
│   │   └── metrics.py
│   └── validation/
│       ├── __init__.py
│       ├── predictability.py
│       ├── quintile_analysis.py
│       ├── factor_spanning.py
│       ├── skewness_tests.py
│       └── risk_analysis.py
├── tests/
│   ├── __init__.py
│   ├── data/
│   │   └── test_bond_universe.py
│   ├── signals/
│   │   ├── test_carry.py
│   │   ├── test_forward_returns.py
│   │   └── test_skewness.py
│   ├── portfolio/
│   │   ├── test_xs_carry.py
│   │   └── test_ts_carry.py
│   └── backtest/
│       ├── test_runner.py
│       └── test_metrics.py
├── reports/
│   ├── data_profile.md
│   ├── carry_validation.md
│   ├── quintile_analysis.md
│   ├── factor_spanning.md
│   ├── skewness_enhancement.md
│   └── risk_analysis.md
└── notebooks/
    └── exploratory/
```

---

## 14. Success Criteria

### 14.1 Minimum Viable Results

| Metric | XS Carry | TS Carry | Threshold |
|--------|----------|----------|-----------|
| Sharpe Ratio | > 0.3 | > 0.3 | Economically meaningful |
| t-stat (mean return) | > 1.96 | > 1.96 | 5% significance |
| Quintile monotonicity | Yes | N/A | Q5 > Q4 > Q3 > Q2 > Q1 |
| Alpha after factors | > 0 | > 0 | Significant at 10% |

### 14.2 Skewness Enhancement Criteria

| Test | Expected Result | Pass Criterion |
|------|-----------------|----------------|
| Standalone Skewness SR | > 0 | Positive return |
| Combined vs Carry-only | Higher SR | Improvement > 0.05 |
| Fama-MacBeth β(skew) | Significant | p < 0.10 |
| H-K Spanning Test | Reject H0 | p < 0.05 |

### 14.3 Kill Criteria

Stop if:
1. Sharpe ratio < 0 over full sample
2. Signal has wrong sign (high carry → lower returns)
3. Transaction costs exceed gross alpha
4. Drawdowns exceed 30% without recovery

---

## 15. References

1. Koijen, R.S.J., Moskowitz, T.J., Pedersen, L.H., & Vrugt, E.B. (2018). Carry. *Journal of Financial Economics*, 127(2), 197-225.

2. Baltas, N. (2017). Optimising Cross-Asset Carry. In *Factor Investing*, edited by E. Jurczenko, Elsevier & ISTE Press.

3. Baltas, N., & Salinas, G. (2019). Cross-Asset Skew. Working Paper, Goldman Sachs / Teacher Retirement System of Texas.

4. Asness, C.S., Moskowitz, T.J., & Pedersen, L.H. (2013). Value and Momentum Everywhere. *Journal of Finance*, 68(3), 929-985.

5. Moskowitz, T.J., Ooi, Y.H., & Pedersen, L.H. (2012). Time Series Momentum. *Journal of Financial Economics*, 104(2), 228-250.

6. Huberman, G., & Kandel, S. (1987). Mean-Variance Spanning. *Journal of Finance*, 42(4), 873-888.

7. Fama, E.F., & MacBeth, J.D. (1973). Risk, Return, and Equilibrium: Empirical Tests. *Journal of Political Economy*, 81(3), 607-636.

8. Newey, W.K., & West, K.D. (1987). A Simple, Positive Semi-Definite, Heteroskedasticity and Autocorrelation Consistent Covariance Matrix. *Econometrica*, 55(3), 703-708.

---

## Appendix A: Notation Summary

| Symbol | Definition |
|--------|------------|
| $i$ | Bond index |
| $t$ | Time index (rebalancing date) |
| $N_t$ | Number of bonds in universe at time $t$ |
| $C_{i,t}$ | Net carry for bond $i$ at time $t$ |
| $D_{i,t}$ | Modified duration |
| $\text{OAS}_{i,t}$ | Option-adjusted spread (basis points) |
| $r_f$ | Risk-free funding rate (SOFR) |
| $r_{i,t}$ | Return of bond $i$ at time $t$ |
| $w_{i,t}$ | Portfolio weight for bond $i$ at time $t$ |
| $R_{i,t}$ | Cross-sectional rank of bond $i$ |
| $\widehat{\text{Skew}}_{i,t}$ | Realized skewness |

## Appendix B: Data Conventions

| Field | Convention |
|-------|------------|
| Yields | Decimal (0.05 = 5%) |
| OAS | Basis points (convert by /10000) |
| Duration | Years (modified) |
| Prices | Percent of par (100 = par) |
| Returns | Decimal (0.01 = 1%) |
| Dates | pd.Timestamp, UTC |
| Identifiers | CUSIP (9-character) primary |
# Part IV: Falsifiable Hypotheses & Pre-Registration Protocol

## 16. Hypothesis Testing Framework

### 16.1 Philosophy of Pre-Registration

This section defines a set of **falsifiable hypotheses** that must be tested before proceeding with live implementation. Each hypothesis has:

1. **Null Hypothesis (H₀)**: The skeptical position (no effect)
2. **Alternative Hypothesis (H₁)**: The position we hope to confirm
3. **Test Statistic**: How we measure the effect
4. **GO Criterion**: Threshold for proceeding
5. **NO-GO Criterion**: Threshold for abandoning
6. **INCONCLUSIVE Zone**: Results requiring additional investigation

**Critical Principle**: We pre-commit to these criteria BEFORE running the tests. This prevents p-hacking and data snooping.

---

## 17. Primary Hypotheses: Does Carry Predict Returns?

### 17.1 Hypothesis H1: Raw Carry Predictability

**Research Question**: Does net carry (OAS × Duration - Funding Cost) predict future bond returns?

$$
H_0: \beta = 0 \quad \text{vs} \quad H_1: \beta > 0
$$

In the regression:
$$
r_{i,t+1} = \alpha + \beta \cdot C_{i,t} + \epsilon_{i,t+1}
$$

| Criterion | Threshold | Action |
|-----------|-----------|--------|
| **GO** | $t(\beta) > 1.96$ AND $\beta > 0$ | Proceed with carry signal |
| **NO-GO** | $t(\beta) < 1.28$ OR $\beta < 0$ | Abandon carry strategy |
| **INCONCLUSIVE** | $1.28 \leq t(\beta) \leq 1.96$ | Extend sample, add controls |

**Diagnostic Output**: `reports/H1_raw_carry_predictability.md`

---

### 17.2 Hypothesis H2: Carry Normalization Comparison

**Research Question**: What is the optimal way to normalize carry for cross-sectional comparison?

We test four normalization schemes:

| Variant | Formula | Rationale |
|---------|---------|-----------|
| **H2a**: Raw | $C_{i,t} = \text{OAS}_i \times D_i - r_f \times D_i$ | Baseline |
| **H2b**: OAS-normalized | $C_{i,t}^{norm} = \frac{C_{i,t}}{\text{OAS}_i}$ | Control for spread level |
| **H2c**: Vol-normalized | $C_{i,t}^{vol} = \frac{C_{i,t}}{\sigma_i}$ | Risk-adjusted carry |
| **H2d**: OAS×Vol-normalized | $C_{i,t}^{ov} = \frac{C_{i,t}}{\text{OAS}_i \times \sigma_i}$ | Double normalization |

**Test Procedure**:

For each normalization $k \in \{a, b, c, d\}$:

1. Construct XS portfolio using normalized signal
2. Compute Sharpe ratio: $SR_k$
3. Compute information ratio vs. raw: $IR_k = \frac{\alpha_k}{\sigma(\epsilon_k)}$

**Comparison Metric**:
$$
\Delta SR_k = SR_k - SR_{raw}
$$

| Criterion | Threshold | Action |
|-----------|-----------|--------|
| **GO (Alternative)** | $\Delta SR_k > 0.10$ AND $t(\Delta SR) > 1.65$ | Adopt normalization $k$ |
| **GO (Raw)** | $\max_k \Delta SR_k < 0.05$ | Keep raw carry |
| **INCONCLUSIVE** | $0.05 \leq \max_k \Delta SR_k \leq 0.10$ | Report both, investigate |

**Diagnostic Output**: `reports/H2_normalization_comparison.md`

---

### 17.3 Hypothesis H3: Spread Decomposition (PD × LGD)

**Research Question**: Is carry return driven by compensation for actual default risk (PD × LGD) or by mispricing/technical factors?

**Theoretical Background**: 

Under risk-neutral pricing, OAS should equal expected loss:
$$
\text{OAS} \approx \text{PD} \times \text{LGD} + \text{Liquidity Premium} + \text{Risk Premium}
$$

If carry returns are purely compensation for realized defaults, then:
$$
H_0: \text{Carry Return} = \text{Default Losses} \quad (\text{No excess return})
$$

**Test Design**:

#### Step 1: Decompose OAS
```
OAS_i = PD_i × LGD_i + Residual_i

Where:
- PD_i = Probability of default (from CDS or rating-implied)
- LGD_i = Loss given default (typically 60% for senior unsecured)
- Residual_i = Non-default spread component
```

#### Step 2: Construct Alternative Carry Signals

| Signal | Formula | What It Captures |
|--------|---------|------------------|
| **Total Carry** | $\text{OAS} \times D$ | All spread risk |
| **Default Carry** | $(\text{PD} \times \text{LGD}) \times D$ | Pure default risk |
| **Residual Carry** | $\text{Residual} \times D$ | Non-default premium |

#### Step 3: Regression Test

$$
r_{i,t+1} = \alpha + \beta_1 \cdot C_{i,t}^{Default} + \beta_2 \cdot C_{i,t}^{Residual} + \epsilon_{i,t+1}
$$

| Criterion | Condition | Interpretation | Action |
|-----------|-----------|----------------|--------|
| **GO (Residual-driven)** | $\beta_2 > 0$, $t(\beta_2) > 1.96$, $\beta_2 > \beta_1$ | Non-default spread predicts returns | Carry captures risk premium beyond default |
| **GO (Default-driven)** | $\beta_1 > 0$, $t(\beta_1) > 1.96$, $\beta_1 > \beta_2$ | Default spread predicts returns | Carry is default risk compensation |
| **NO-GO** | Both $\beta_1, \beta_2$ insignificant | Neither component works | Reconsider strategy |
| **INCONCLUSIVE** | Mixed significance | Partial effect | Investigate further |

**Diagnostic Output**: `reports/H3_spread_decomposition.md`

---

## 18. Anti-Tilt Hypotheses: Testing for Spurious Effects

### 18.1 Hypothesis H4: Duration Tilt (Anti-Hypothesis)

**Research Question**: Is carry return simply a disguised duration bet?

**Concern**: Since $\text{Carry} = \text{OAS} \times D - r_f \times D = (\text{OAS} - r_f) \times D$, high-carry bonds may simply be long-duration bonds. In a falling rate environment, this would generate spurious outperformance.

**Null Hypothesis (Skeptical)**:
$$
H_0: \text{Carry strategy} = \text{Duration strategy} \quad (\text{No independent effect})
$$

**Test Design**:

#### Test 4a: Duration-Neutral Carry

Construct duration-neutral carry portfolio:

1. Compute duration exposure: $\text{DurationExp} = \sum_i w_i \times D_i$
2. Hedge with Treasury futures to achieve $\text{DurationExp} = 0$
3. Compare hedged vs. unhedged Sharpe ratios

| Criterion | Threshold | Action |
|-----------|-----------|--------|
| **GO** | $SR_{hedged} > 0.2$ AND $SR_{hedged} / SR_{unhedged} > 0.5$ | Carry has independent value |
| **NO-GO** | $SR_{hedged} < 0$ OR $SR_{hedged} / SR_{unhedged} < 0.3$ | Carry is duration in disguise |
| **INCONCLUSIVE** | $0 < SR_{hedged} < 0.2$ | Partial duration effect |

#### Test 4b: Fama-MacBeth with Duration Control

$$
r_{i,t+1} = \alpha + \beta_1 \cdot C_{i,t} + \beta_2 \cdot D_{i,t} + \epsilon_{i,t+1}
$$

| Criterion | Condition | Action |
|-----------|-----------|--------|
| **GO** | $\beta_1 > 0$, $t(\beta_1) > 1.96$ after controlling for duration | Carry is not duration tilt |
| **NO-GO** | $\beta_1$ insignificant after adding $D_{i,t}$ | Carry is duration tilt |

**Diagnostic Output**: `reports/H4_duration_tilt_test.md`

---

### 18.2 Hypothesis H5: Rating Tilt (Anti-Hypothesis)

**Research Question**: Is carry return simply a disguised credit quality bet?

**Concern**: High OAS bonds are typically lower-rated (BBB vs. A). Carry strategy may just be going long BBB / short A, which is a known risk premium.

**Null Hypothesis (Skeptical)**:
$$
H_0: \text{Carry strategy} = \text{Rating strategy} \quad (\text{No independent effect})
$$

**Test Design**:

#### Test 5a: Rating-Neutral Carry

Construct rating-neutral XS carry:

1. Within each rating bucket (AAA, AA, A, BBB), construct XS portfolio
2. Combine rating-specific portfolios with equal risk weights
3. Compare to unconstrained XS carry

| Criterion | Threshold | Action |
|-----------|-----------|--------|
| **GO** | $SR_{rating-neutral} > 0.2$ AND correlation with rating factor < 0.3 | Carry has independent value |
| **NO-GO** | $SR_{rating-neutral} < 0$ OR correlation with rating factor > 0.7 | Carry is rating in disguise |

#### Test 5b: Fama-MacBeth with Rating Dummies

$$
r_{i,t+1} = \alpha + \beta \cdot C_{i,t} + \sum_{k} \gamma_k \cdot \mathbb{1}_{Rating_i = k} + \epsilon_{i,t+1}
$$

| Criterion | Condition | Action |
|-----------|-----------|--------|
| **GO** | $\beta > 0$, $t(\beta) > 1.96$ after rating controls | Carry is not rating tilt |
| **NO-GO** | $\beta$ insignificant after rating controls | Carry is rating tilt |

**Diagnostic Output**: `reports/H5_rating_tilt_test.md`

---

### 18.3 Hypothesis H6: Sector Tilt (Anti-Hypothesis)

**Research Question**: Is carry return driven by persistent sector bets?

**Concern**: Certain sectors (e.g., Financials, Energy) may have systematically higher spreads. Carry strategy may be a disguised sector allocation.

**Test Design**:

#### Test 6a: Sector-Neutral Carry

1. Within each GICS sector, construct XS portfolio
2. Combine with equal risk weights
3. Compare to unconstrained XS carry

#### Test 6b: Sector Exposure Analysis

Compute time-series of sector weights in carry portfolio:
$$
w_{sector,t} = \sum_{i \in sector} w_{i,t}
$$

| Criterion | Threshold | Action |
|-----------|-----------|--------|
| **GO** | Max sector weight < 30% AND sector weights mean-reverting | Diversified carry |
| **CAUTION** | Max sector weight > 40% | Concentrated sector bet |
| **NO-GO** | Single sector > 50% weight persistently | Carry is sector bet |

**Diagnostic Output**: `reports/H6_sector_tilt_test.md`

---

### 18.4 Hypothesis H7: Liquidity Tilt (Anti-Hypothesis)

**Research Question**: Is carry return compensation for holding illiquid bonds?

**Concern**: High OAS may reflect illiquidity premium, not credit risk premium. Strategy may be harvesting illiquidity risk.

**Liquidity Proxies**:
- Issue size (larger = more liquid)
- Age since issuance (newer = more liquid)
- Bid-ask spread (if available)
- Trading volume (if available)

**Test Design**:

$$
r_{i,t+1} = \alpha + \beta_1 \cdot C_{i,t} + \beta_2 \cdot \text{Illiquidity}_{i,t} + \epsilon_{i,t+1}
$$

| Criterion | Condition | Action |
|-----------|-----------|--------|
| **GO** | $\beta_1 > 0$ significant after liquidity control | Carry is not illiquidity |
| **ACCEPTABLE** | Both $\beta_1, \beta_2 > 0$ significant | Carry partially captures liquidity premium |
| **NO-GO** | $\beta_1$ insignificant after liquidity control | Carry is illiquidity in disguise |

**Diagnostic Output**: `reports/H7_liquidity_tilt_test.md`

---

## 19. Strategy Comparison Hypotheses

### 19.1 Hypothesis H8: XS vs. TS Comparison

**Research Question**: Which strategy construction is superior?

**Test Design**: Paired comparison of XS and TS portfolios

| Metric | XS Portfolio | TS Portfolio | Comparison |
|--------|--------------|--------------|------------|
| Sharpe Ratio | $SR_{XS}$ | $SR_{TS}$ | $\Delta SR = SR_{XS} - SR_{TS}$ |
| Sortino Ratio | $Sortino_{XS}$ | $Sortino_{TS}$ | $\Delta Sortino$ |
| Max Drawdown | $MDD_{XS}$ | $MDD_{TS}$ | $\Delta MDD$ |
| Skewness | $Skew_{XS}$ | $Skew_{TS}$ | $\Delta Skew$ |

**Statistical Test**: Ledoit-Wolf test for Sharpe ratio difference

$$
H_0: SR_{XS} = SR_{TS} \quad \text{vs} \quad H_1: SR_{XS} \neq SR_{TS}
$$

| Criterion | Condition | Action |
|-----------|-----------|--------|
| **GO (XS)** | $SR_{XS} > SR_{TS} + 0.1$ AND $p < 0.10$ | Prefer XS |
| **GO (TS)** | $SR_{TS} > SR_{XS} + 0.1$ AND $p < 0.10$ | Prefer TS |
| **GO (Both)** | $|SR_{XS} - SR_{TS}| < 0.1$ AND both $> 0.3$ | Use both (diversification) |
| **NO-GO** | Both $SR < 0.2$ | Neither strategy viable |

**Correlation Analysis**:
$$
\rho(r_{XS}, r_{TS})
$$

| Criterion | Threshold | Implication |
|-----------|-----------|-------------|
| $\rho < 0.5$ | Low correlation | Strong diversification benefit |
| $0.5 \leq \rho < 0.8$ | Moderate | Some diversification |
| $\rho \geq 0.8$ | High | Choose one, not both |

**Diagnostic Output**: `reports/H8_xs_vs_ts_comparison.md`

---

### 19.2 Hypothesis H9: Sector-Specific Carry Efficacy

**Research Question**: Does carry work uniformly across sectors, or are some sectors better than others?

**Test Design**: Run carry strategy separately within each major sector

| Sector | XS Sharpe | TS Sharpe | GO/NO-GO |
|--------|-----------|-----------|----------|
| Financials | $SR_{Fin}$ | | |
| Industrials | $SR_{Ind}$ | | |
| Utilities | $SR_{Util}$ | | |
| Technology | $SR_{Tech}$ | | |
| Healthcare | $SR_{Health}$ | | |
| Energy | $SR_{Energy}$ | | |
| Consumer | $SR_{Cons}$ | | |

**Sector-Specific Criteria**:

| Criterion | Condition | Action |
|-----------|-----------|--------|
| **GO (Sector)** | $SR_{sector} > 0.25$ | Include sector in strategy |
| **NO-GO (Sector)** | $SR_{sector} < 0$ | Exclude sector |
| **INCONCLUSIVE** | $0 < SR_{sector} < 0.25$ | Include with lower weight |

**Cross-Sector Test**:
$$
H_0: SR_{sector_1} = SR_{sector_2} \quad \forall \text{ sector pairs}
$$

**Diagnostic Output**: `reports/H9_sector_efficacy.md`

---

### 19.3 Hypothesis H10: Rating-Specific Carry Efficacy

**Research Question**: Does carry work uniformly across rating categories?

**Test Design**: Run carry strategy separately within each rating bucket

| Rating | XS Sharpe | Observations | GO/NO-GO |
|--------|-----------|--------------|----------|
| AAA/AA | $SR_{AA}$ | $N_{AA}$ | |
| A | $SR_{A}$ | $N_A$ | |
| BBB+ | $SR_{BBB+}$ | $N_{BBB+}$ | |
| BBB | $SR_{BBB}$ | $N_{BBB}$ | |
| BBB- | $SR_{BBB-}$ | $N_{BBB-}$ | |

**Key Hypothesis**: 
$$
H_0: SR_{BBB} = SR_{A} \quad \text{vs} \quad H_1: SR_{BBB} > SR_{A}
$$

(We expect carry to work better in lower-rated IG due to higher spread dispersion)

| Criterion | Condition | Action |
|-----------|-----------|--------|
| **GO** | $SR_{BBB} > SR_{A} > 0$ | Confirms spread premium hypothesis |
| **SURPRISE** | $SR_{A} > SR_{BBB}$ | Investigate; may indicate default risk |
| **NO-GO** | $SR_{BBB} < 0$ | BBB carry not viable |

**Diagnostic Output**: `reports/H10_rating_efficacy.md`

---

## 20. Skewness Enhancement Hypotheses

### 20.1 Hypothesis H11: Standalone Skewness Predictability

**Research Question**: Does realized skewness predict future bond returns (independent of carry)?

$$
r_{i,t+1} = \alpha + \beta \cdot (-\widehat{Skew}_{i,t}) + \epsilon_{i,t+1}
$$

Note: Negative sign because more negative skew → higher expected return.

| Criterion | Condition | Action |
|-----------|-----------|--------|
| **GO** | $\beta > 0$, $t(\beta) > 1.96$ | Skewness is independent predictor |
| **NO-GO** | $\beta \leq 0$ OR $t(\beta) < 1.28$ | Skewness not useful |
| **INCONCLUSIVE** | $\beta > 0$, $1.28 < t(\beta) < 1.96$ | Weak evidence, needs more data |

**Diagnostic Output**: `reports/H11_skewness_predictability.md`

---

### 20.2 Hypothesis H12: Skewness Adds Value to Carry

**Research Question**: Does adding skewness to carry improve risk-adjusted returns?

**Test Design**: Compare three portfolios

1. **Carry-only**: XS portfolio ranked by carry
2. **Skewness-only**: XS portfolio ranked by negative skewness
3. **Combined**: XS portfolio ranked by $\lambda \cdot z(C) + (1-\lambda) \cdot z(-Skew)$

**Optimal Lambda Search**:
Test $\lambda \in \{0.3, 0.5, 0.7\}$

**Metrics**:

| Portfolio | Sharpe | Sortino | Max DD |
|-----------|--------|---------|--------|
| Carry-only | $SR_C$ | $Sort_C$ | $MDD_C$ |
| Skewness-only | $SR_S$ | $Sort_S$ | $MDD_S$ |
| Combined ($\lambda=0.5$) | $SR_{Comb}$ | $Sort_{Comb}$ | $MDD_{Comb}$ |

**Decision Criteria**:

| Criterion | Condition | Action |
|-----------|-----------|--------|
| **GO (Combined)** | $SR_{Comb} > SR_C + 0.05$ AND $SR_{Comb} > SR_S$ | Use combined signal |
| **GO (Carry-only)** | $SR_C > SR_{Comb}$ AND $SR_C > SR_S$ | Skewness adds no value |
| **GO (Skewness-only)** | $SR_S > SR_C$ AND $SR_S > SR_{Comb}$ | Skewness dominates carry |
| **NO-GO** | All $SR < 0.2$ | Neither signal viable |

**Diagnostic Output**: `reports/H12_skewness_enhancement.md`

---

### 20.3 Hypothesis H13: Mean-Variance Spanning (Formal Test)

**Research Question**: Does skewness expand the efficient frontier beyond carry?

**Test**: Huberman-Kandel (1987) spanning test

$$
H_0: \alpha = 0 \text{ AND } \sum_i \beta_i = 1
$$

In regression:
$$
r_t^{Skew} = \alpha + \beta_1 \cdot r_t^{Carry} + \beta_2 \cdot r_t^{Momentum} + \epsilon_t
$$

**GMM Wald Statistic**:
$$
W = T \cdot \begin{pmatrix} \hat{\alpha} \\ \sum \hat{\beta} - 1 \end{pmatrix}' \hat{V}^{-1} \begin{pmatrix} \hat{\alpha} \\ \sum \hat{\beta} - 1 \end{pmatrix} \sim \chi^2(2)
$$

| Criterion | Condition | Action |
|-----------|-----------|--------|
| **GO** | Reject $H_0$ at $p < 0.05$ | Skewness expands frontier |
| **NO-GO** | Fail to reject $H_0$ at $p > 0.10$ | Skewness is spanned |
| **INCONCLUSIVE** | $0.05 < p < 0.10$ | Marginal evidence |

**Diagnostic Output**: `reports/H13_spanning_test.md`

---

## 21. Risk Hypotheses

### 21.1 Hypothesis H14: Crash Risk Exposure

**Research Question**: Is carry return compensation for crash risk?

Following Baltas (2017), test exposure to:

#### Test 14a: Equity Crash Risk

$$
r_t^{Carry} = \alpha + \beta \cdot r_t^{SPX} + \gamma \cdot r_t^{SPX,down} + \epsilon_t
$$

Where $r_t^{SPX,down} = -r_t^{SPX} \cdot \mathbb{1}_{r_t^{SPX} < 0}$

| Criterion | Condition | Interpretation |
|-----------|-----------|----------------|
| $\gamma < 0$, significant | Negative downside beta | Carry suffers in equity crashes |
| $\gamma \approx 0$ | No downside exposure | Carry is crash-neutral |
| $\gamma > 0$, significant | Positive downside beta | Carry hedges equity crashes |

#### Test 14b: Credit Crash Risk

$$
r_t^{Carry} = \alpha + \beta \cdot r_t^{CDX} + \gamma \cdot r_t^{CDX,down} + \epsilon_t
$$

#### Test 14c: Volatility Risk

$$
r_t^{Carry} = \alpha + \beta \cdot r_t^{MKT} + \phi \cdot \Delta VIX_t + \epsilon_t
$$

| Criterion | Condition | Action |
|-----------|-----------|--------|
| **ACCEPTABLE** | $\gamma$ or $\phi$ mildly negative | Carry has some crash exposure (expected) |
| **CAUTION** | $\gamma < -0.5$ or $\phi < -0.1$ | High crash sensitivity |
| **GO** | Sharpe > 0.3 despite crash exposure | Carry compensates for risk |
| **NO-GO** | Crash exposure without adequate Sharpe | Risk not compensated |

**Diagnostic Output**: `reports/H14_crash_risk.md`

---

### 21.2 Hypothesis H15: Tail Risk Distribution

**Research Question**: What is the tail risk profile of the carry strategy?

**Metrics**:

| Metric | Formula | Threshold |
|--------|---------|-----------|
| Skewness | $\frac{1}{T}\sum\left(\frac{r_t - \mu}{\sigma}\right)^3$ | < -0.5 is concerning |
| Kurtosis | $\frac{1}{T}\sum\left(\frac{r_t - \mu}{\sigma}\right)^4$ | > 4 is fat-tailed |
| VaR (5%) | 5th percentile of returns | |
| CVaR (5%) | Mean of returns below VaR | |
| Max Drawdown | Largest peak-to-trough | < 20% preferred |

**Decision Matrix**:

| Skewness | Kurtosis | Max DD | Assessment | Action |
|----------|----------|--------|------------|--------|
| > -0.3 | < 4 | < 15% | Benign | GO |
| -0.3 to -0.7 | 4-6 | 15-25% | Moderate risk | GO with position limits |
| < -0.7 | > 6 | > 25% | High tail risk | Require risk overlay |

**Diagnostic Output**: `reports/H15_tail_risk.md`

---

## 22. Summary Decision Matrix

### 22.1 Master GO/NO-GO Table

| Hypothesis | Test | GO Threshold | NO-GO Threshold | Priority |
|------------|------|--------------|-----------------|----------|
| H1 | Raw carry predictability | $t > 1.96$, $\beta > 0$ | $t < 1.28$ or $\beta < 0$ | **CRITICAL** |
| H2 | Normalization | Best $SR$ | - | Medium |
| H3 | PD×LGD decomposition | $\beta_{residual}$ significant | Neither significant | Medium |
| H4 | Duration tilt | $SR_{hedged} > 0.2$ | $SR_{hedged} < 0$ | **CRITICAL** |
| H5 | Rating tilt | $\beta$ significant after controls | $\beta$ insignificant | **CRITICAL** |
| H6 | Sector tilt | Max sector < 30% | Single sector > 50% | High |
| H7 | Liquidity tilt | $\beta$ significant after controls | $\beta$ insignificant | High |
| H8 | XS vs TS | At least one $SR > 0.3$ | Both $SR < 0.2$ | **CRITICAL** |
| H9 | Sector efficacy | Most sectors $SR > 0$ | Majority $SR < 0$ | Medium |
| H10 | Rating efficacy | BBB works | BBB $SR < 0$ | High |
| H11 | Skewness standalone | $t > 1.96$ | $\beta < 0$ | Medium |
| H12 | Skewness enhancement | $SR_{comb} > SR_C + 0.05$ | $SR_{comb} < SR_C$ | Medium |
| H13 | Spanning test | Reject $H_0$ | Fail to reject | Low |
| H14 | Crash risk | Sharpe compensates | High exposure, low Sharpe | High |
| H15 | Tail risk | Skew > -0.7 | Skew < -1.0, MDD > 30% | High |

### 22.2 Sequential Gate Structure

```
                    ┌─────────────────┐
                    │  START          │
                    └────────┬────────┘
                             │
                             ▼
                    ┌─────────────────┐
              NO    │  H1: Carry      │    NO
         ◄──────────┤  Predictable?   ├──────────►  STOP
                    └────────┬────────┘
                             │ YES
                             ▼
              ┌──────────────┴──────────────┐
              │                             │
              ▼                             ▼
     ┌─────────────────┐           ┌─────────────────┐
     │  H4: Duration   │           │  H5: Rating     │
     │  Tilt Test      │           │  Tilt Test      │
     └────────┬────────┘           └────────┬────────┘
              │                             │
              ▼                             ▼
         PASS/FAIL                     PASS/FAIL
              │                             │
              └──────────────┬──────────────┘
                             │
                             ▼
                    ┌─────────────────┐
              NO    │  Both Pass?     │    
         ◄──────────┤                 ├──────────►  STOP
                    └────────┬────────┘
                             │ YES
                             ▼
                    ┌─────────────────┐
                    │  H8: XS vs TS   │
                    │  Comparison     │
                    └────────┬────────┘
                             │
                             ▼
                    ┌─────────────────┐
                    │  Select Best    │
                    │  or Both        │
                    └────────┬────────┘
                             │
                             ▼
                    ┌─────────────────┐
                    │  H14/H15: Risk  │
                    │  Assessment     │
                    └────────┬────────┘
                             │
                             ▼
                    ┌─────────────────┐
              NO    │  Risk           │
         ◄──────────┤  Acceptable?    ├──────────►  STOP
                    └────────┬────────┘
                             │ YES
                             ▼
                    ┌─────────────────┐
                    │  H11-13:        │
                    │  Skewness       │
                    │  Enhancement    │
                    └────────┬────────┘
                             │
                             ▼
                    ┌─────────────────┐
                    │  Final Strategy │
                    │  Selection      │
                    └─────────────────┘
```

### 22.3 Minimum Viable Strategy Criteria

**To proceed to paper trading, ALL of the following must be met:**

| Gate | Criterion | Measured By |
|------|-----------|-------------|
| **Gate 1** | Carry predicts returns | H1: $t(\beta) > 1.96$ |
| **Gate 2** | Not a duration bet | H4: $SR_{hedged} > 0.2$ |
| **Gate 3** | Not a rating bet | H5: $\beta$ significant after controls |
| **Gate 4** | Economically significant | H8: At least one strategy $SR > 0.3$ |
| **Gate 5** | Acceptable tail risk | H15: Skew > -0.7, MDD < 25% |

**To add skewness enhancement:**

| Gate | Criterion | Measured By |
|------|-----------|-------------|
| **Gate 6** | Skewness improves Sharpe | H12: $SR_{comb} > SR_{carry} + 0.05$ |
| **Gate 7** | Expands efficient frontier | H13: Spanning test rejects $H_0$ |

---

## 23. Implementation Checklist

### 23.1 Pre-Analysis Commitment

Before running any tests, document and commit to:

```yaml
# prereg_hypotheses.yaml

commitment_date: "YYYY-MM-DD"
analyst: "Name"

hypotheses:
  H1_carry_predictability:
    go_threshold: "t > 1.96 AND beta > 0"
    nogo_threshold: "t < 1.28 OR beta < 0"
    committed: true
    
  H4_duration_tilt:
    go_threshold: "SR_hedged > 0.2"
    nogo_threshold: "SR_hedged < 0"
    committed: true
    
  # ... etc for all hypotheses

analysis_plan:
  - Run H1 first
  - If H1 passes, run H4 and H5 in parallel
  - If H4 AND H5 pass, run H8
  - Continue per sequential gate structure
  
data_freeze_date: "YYYY-MM-DD"
no_changes_after_freeze: true
```

### 23.2 Results Documentation Template

For each hypothesis, document:

```markdown
# Hypothesis Hx: [Title]

## Pre-Registered Criteria
- GO: [threshold]
- NO-GO: [threshold]

## Data Used
- Sample period: [start] to [end]
- Number of observations: [N]
- Universe: [description]

## Results
- Test statistic: [value]
- p-value: [value]
- Point estimate: [value]
- Confidence interval: [lower, upper]

## Decision
- [ ] GO
- [ ] NO-GO
- [ ] INCONCLUSIVE

## Notes
[Any relevant observations or caveats]
```

---

## 24. Diagnostic Test Code Structure

### 24.1 Test Module Organization

```
src/validation/
├── __init__.py
├── hypothesis_tests/
│   ├── __init__.py
│   ├── h01_carry_predictability.py
│   ├── h02_normalization.py
│   ├── h03_spread_decomposition.py
│   ├── h04_duration_tilt.py
│   ├── h05_rating_tilt.py
│   ├── h06_sector_tilt.py
│   ├── h07_liquidity_tilt.py
│   ├── h08_xs_vs_ts.py
│   ├── h09_sector_efficacy.py
│   ├── h10_rating_efficacy.py
│   ├── h11_skewness_standalone.py
│   ├── h12_skewness_enhancement.py
│   ├── h13_spanning_test.py
│   ├── h14_crash_risk.py
│   └── h15_tail_risk.py
├── utils/
│   ├── statistical_tests.py  # Fama-MacBeth, Newey-West, etc.
│   ├── spanning_tests.py     # Huberman-Kandel
│   └── bootstrap.py          # Bootstrap confidence intervals
└── run_all_hypotheses.py     # Master runner with gate logic
```

### 24.2 Standard Test Function Signature

```python
def test_hypothesis_hX(
    data: pd.DataFrame,
    params: dict,
    output_dir: str = "reports/"
) -> HypothesisResult:
    """
    Test Hypothesis HX: [Description]
    
    Parameters
    ----------
    data : pd.DataFrame
        Input data with required columns
    params : dict
        Test parameters (thresholds, etc.)
    output_dir : str
        Directory for output report
        
    Returns
    -------
    HypothesisResult
        Named tuple with fields:
        - hypothesis_id: str
        - test_statistic: float
        - p_value: float
        - point_estimate: float
        - ci_lower: float
        - ci_upper: float
        - decision: str  # 'GO', 'NO-GO', 'INCONCLUSIVE'
        - details: dict  # Additional test-specific outputs
    """
    pass
```

---

## Appendix C: Statistical Test Implementations

### C.1 Fama-MacBeth Regression

```python
def fama_macbeth_regression(
    data: pd.DataFrame,
    y_col: str,
    x_cols: List[str],
    date_col: str = 'as_of_date'
) -> FamaMacBethResult:
    """
    Run Fama-MacBeth two-stage regression.
    
    Stage 1: Cross-sectional regression at each date
    Stage 2: Time-series average of coefficients
    
    Standard errors: Newey-West with automatic lag selection
    """
    # Stage 1: Cross-sectional regressions
    betas = []
    for date in data[date_col].unique():
        subset = data[data[date_col] == date]
        X = subset[x_cols]
        y = subset[y_col]
        model = OLS(y, add_constant(X)).fit()
        betas.append(model.params)
    
    betas_df = pd.DataFrame(betas)
    
    # Stage 2: Time-series statistics
    mean_beta = betas_df.mean()
    
    # Newey-West standard errors
    T = len(betas_df)
    lag = int(4 * (T / 100) ** (2/9))  # Automatic lag selection
    se_nw = newey_west_se(betas_df, lag)
    
    t_stats = mean_beta / se_nw
    p_values = 2 * (1 - stats.t.cdf(np.abs(t_stats), df=T-1))
    
    return FamaMacBethResult(
        coefficients=mean_beta,
        std_errors=se_nw,
        t_statistics=t_stats,
        p_values=p_values,
        n_periods=T
    )
```

### C.2 Huberman-Kandel Spanning Test

```python
def huberman_kandel_spanning_test(
    test_asset: pd.Series,
    benchmark_assets: pd.DataFrame
) -> SpanningTestResult:
    """
    Test if benchmark assets span the test asset.
    
    H0: alpha = 0 AND sum(beta) = 1
    
    Uses GMM Wald test robust to non-normality.
    """
    # Regression: r_test = alpha + beta' * r_benchmark + epsilon
    X = add_constant(benchmark_assets)
    model = OLS(test_asset, X).fit(cov_type='HAC', 
                                    cov_kwds={'maxlags': 6})
    
    # Extract estimates
    alpha = model.params['const']
    betas = model.params.drop('const')
    sum_beta = betas.sum()
    
    # Construct restriction vector: [alpha, sum(beta) - 1]
    R = np.zeros((2, len(model.params)))
    R[0, 0] = 1  # alpha = 0
    R[1, 1:] = 1  # sum(beta) = 1
    
    r = np.array([0, 1])  # Restriction values
    
    # Wald statistic
    theta = model.params.values
    V = model.cov_params().values
    
    diff = R @ theta - r
    wald_stat = diff.T @ np.linalg.inv(R @ V @ R.T) @ diff
    
    p_value = 1 - stats.chi2.cdf(wald_stat, df=2)
    
    return SpanningTestResult(
        wald_statistic=wald_stat,
        p_value=p_value,
        alpha=alpha,
        sum_beta=sum_beta,
        reject_h0=(p_value < 0.05)
    )
```

### C.3 Ledoit-Wolf Sharpe Ratio Test

```python
def ledoit_wolf_sharpe_test(
    returns_1: pd.Series,
    returns_2: pd.Series
) -> SharpeComparisonResult:
    """
    Test for difference in Sharpe ratios using Ledoit-Wolf (2008).
    
    H0: SR_1 = SR_2
    """
    # Compute Sharpe ratios
    sr1 = returns_1.mean() / returns_1.std() * np.sqrt(12)
    sr2 = returns_2.mean() / returns_2.std() * np.sqrt(12)
    
    # Compute HAC standard error of difference
    diff = returns_1 - returns_2
    
    # ... [detailed implementation]
    
    return SharpeComparisonResult(
        sr_1=sr1,
        sr_2=sr2,
        difference=sr1 - sr2,
        std_error=se_diff,
        t_statistic=(sr1 - sr2) / se_diff,
        p_value=p_val
    )
```

---

## Appendix D: Expected Results Benchmarks

Based on the literature (Koijen et al. 2018, Baltas 2017), expected results for corporate bonds:

| Metric | Expected Range | Source |
|--------|---------------|--------|
| XS Carry Sharpe | 0.3 - 0.6 | Extrapolated from govt bonds (0.44-0.85) |
| TS Carry Sharpe | 0.3 - 0.7 | Extrapolated from govt bonds (0.88) |
| Carry t-stat | > 2.0 | Koijen et al. Table results |
| Strategy skewness | -0.3 to -0.7 | Similar to FX carry |
| Correlation XS/TS | 0.5 - 0.7 | Baltas Table 8 |
| Skewness enhancement | +0.05 to +0.15 SR | Baltas & Salinas results |

**Important**: Corporate bonds are less studied than other asset classes. Results may differ significantly from government bonds due to:
- Higher transaction costs
- Lower liquidity
- Credit event risk
- Smaller universe

These benchmarks are guides, not requirements. The GO/NO-GO criteria are set conservatively to account for estimation uncertainty.
